import{k as e,l as a}from"./user-00efe689.js";import{j as l}from"./index-e7873879.js";import{g as t}from"./utils-e10d97cb.js";import{f as s}from"./feedback-5363c0cc.js";import{d as o,i as r,Y as n,e as i,Z as u,ag as d,c,a as m,T as p,F as v,a7 as f,u as b,U as x,O as h,az as j,aA as w,o as g,I as _,J as S,S as y,R as C,M as k}from"./@vue-c5a747fc.js";import{_ as E}from"./index-1e2a8567.js";import"./lodash-20cd73ca.js";import"./dayjs-9ee440cb.js";import"./axios-5b55c11d.js";import"./element-plus-230cec57.js";import"./lodash-es-fb3d0246.js";import"./@vueuse-90035fc5.js";import"./@element-plus-388117bf.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./escape-html-92a447fa.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-9ca8b935.js";import"./vue-router-641e505b.js";import"./pinia-801b3705.js";/* empty css                    */const z=[{name:"AC液冷空调",coordinate:[20,4],coordinateline:[33,20.5],direction:1,lineShow:!0},{name:"PCS变流器",coordinate:[52,4],coordinateline:[65,20.5],direction:2,lineShow:!0},{name:"BMS电池管理系统",coordinate:[54,72.3],coordinateline:[75,52],direction:3,lineShow:!0},{name:"EMS能源管理系统",coordinate:[5,72.3],coordinateline:[19,52],direction:4,lineShow:!0}],B=[{name:"从机",value:0},{name:"功率曲线",value:1}],A=e=>(j("data-v-afd1912b"),e=e(),w(),e),M={class:"control"},V={class:"system-box"},I={class:"control-box"},P={class:"ctndata-box-box"},O=A((()=>m("div",{class:"ctndata-img"},[m("img",{src:"/static/png/ctn-e9ddfcd4.png",alt:""})],-1))),R={class:"ctndata-box"},U={class:"ctn-name"},F={class:"ctn-value-box"},N={key:0,class:"line-level"},D={class:"btn-box"},G={class:"card-box"},J=A((()=>m("div",{class:"card-header"},[m("span",null,"控制")],-1))),T={class:"newpower-box"},W=A((()=>m("div",{class:"newpower-text"},"正值：充电；负值：放电",-1))),Y={class:"newpower-box"},Z={class:"btn-box-new"},q={class:"tab-box"},H=E(o({__name:"Index",setup(o){r((()=>{ce()})),n((()=>{ue()}));const j=B,w=z,E=i({}),A=i([]),H=i([]),K=i({}),L=i([]),Q=i({}),X=i([]),$=i({}),ee=i([]),ae=i({}),le=i([]),te=i(null),se=i(2e3),oe=i(),re=u({param:null}),ne=i(),ie=u({param:null}),ue=()=>{clearInterval(te.value),te.value=null},de=e=>{a({cmd:e,param:0}).then((e=>{e?s.msgSuccess("操作成功"):s.msgError("操作失败")})).catch((e=>{s.msgError("操作失败")}))},ce=()=>{e().then((e=>{E.value=e,A.value=pe(E.value),H.value=me(E.value),ue(),te.value=setInterval((()=>{ce()}),se.value)})).catch((e=>{}))},me=e=>{let a={"关口表通信状态":e["关口表通信状态"],"变压器表通信状态":e["变压器表通信状态"],"光伏表通信状态":e["光伏表通信状态"],"储能表通信状态":e["储能表通信状态"],"数据记录状态":e["数据记录状态"],"参数配置状态":e["参数配置状态"],"软件版本":e["软件版本"],"可充放状态":e["可充放状态"]};return l(a)},pe=e=>{ae.value={"储能状态":e["储能状态"],"工作模式":e["储能工作模式"],"故障信息":e["故障信息"],"储能功率":e["储能功率"],"关口功率":e["关口功率"],"光伏功率":e["光伏功率"],"负载功率":e["负载功率"],"变压器功率":e["变压器功率"]},Q.value={"PCS状态":e["PCS状态"],"有功功率":e["PCS功率"],"AB线电压":e["AB电压"],"BC线电压":e["BC电压"],"CA线电压":e["CA电压"]},K.value={SOC:e["BMS SOC"],"总电压":e["BMS总电压"],"总电流":e["BMS总电流"],"最高电芯电压":e["最高电芯电压"],"平均电芯电压":e["平均电芯电压"],"最低电芯电压":e["最低电芯电压"],"最高电芯温度":e["最高电芯温度"],"平均电芯温度":e["平均电芯温度"],"最低电芯温度":e["最低电芯温度"]},$.value={"空调模式":e["空调模式"],"出水温度":e["出水温度"],"回水温度":e["回水温度"],"出水压力":e["出水压力"],"回水压力":e["回水压力"]},le.value=l(ae.value),le.value.map((e=>(e.value=t(e.value),e))),X.value=l(Q.value),X.value.map((e=>(e.value=t(e.value),e))),L.value=l(K.value),L.value.map((e=>(e.value=t(e.value),e))),ee.value=l($.value),ee.value.map((e=>(e.value=t(e.value),e)));let a=[];return a.push(ee.value,X.value,L.value,le.value),a};return(e,l)=>{const t=d("el-input"),o=d("el-button"),r=d("el-form-item"),n=d("el-form"),i=d("el-option"),u=d("el-select"),z=d("el-card"),B=d("el-col"),K=d("el-table-column"),L=d("el-table"),Q=d("el-row");return g(),c("div",M,[m("div",V,"系统时间："+p(E.value["系统时间"]),1),m("div",I,[m("div",P,[O,m("div",R,[(g(!0),c(v,null,f(A.value,((e,a)=>(g(),c("div",{key:a,class:_(["ctn-box",["ctn-box","ctn-box"+(a+1)]]),style:S("top: ".concat(b(w)[a].coordinate[0],"%; left: ").concat(b(w)[a].coordinate[1],"%;"))},[m("div",U,p(b(w)[a].name),1),m("div",F,[(g(!0),c(v,null,f(e,((e,a)=>(g(),c("div",{key:a+"A",class:"ctn-value"},[y(p(e.name)+"： ",1),m("span",null,p(e.value),1),y(" "+p(e.unit),1)])))),128))])],6)))),128)),(g(!0),c(v,null,f(b(w),((e,a)=>(g(),c("div",{key:a,class:_(["line-box","line-direction"+e.direction]),style:S("top: ".concat(e.coordinateline[0],"%; left: ").concat(e.coordinateline[1],"%;"))},[e.lineShow?(g(),c("div",N)):C("",!0)],6)))),128))])])]),m("div",D,[x(Q,null,{default:h((()=>[x(B,{xs:24,sm:12,class:"col-box"},{default:h((()=>[m("div",G,[x(z,{class:"box-card"},{header:h((()=>[J])),default:h((()=>[m("div",null,[x(n,{ref_key:"formRef",ref:oe,model:re,size:"default"},{default:h((()=>[x(r,{label:"功率设定",prop:"param"},{default:h((()=>[m("div",T,[x(t,{modelValue:re.param,"onUpdate:modelValue":l[0]||(l[0]=e=>re.param=e),type:"number",class:"newpower-input",style:{"max-width":"190px"}},{append:h((()=>[y("kW")])),_:1},8,["modelValue"]),x(o,{class:"newpower-btn",onClick:l[1]||(l[1]=e=>(e=>{if(!e)return;if(null===re.param)return void s.msgError("请输入功率");let l={cmd:4,param:Number(re.param)};a(l).then((e=>{e?s.msgSuccess("操作成功"):s.msgError("操作失败")})).catch((e=>{s.msgError("操作失败")}))})(oe.value))},{default:h((()=>[y("设定")])),_:1})]),W])),_:1})])),_:1},8,["model"]),x(n,{ref_key:"formRef1",ref:ne,model:ie,size:"default"},{default:h((()=>[x(r,{label:"工作模式",prop:"param"},{default:h((()=>[m("div",Y,[x(u,{modelValue:ie.param,"onUpdate:modelValue":l[2]||(l[2]=e=>ie.param=e),placeholder:"工作模式",style:{"max-width":"190px"}},{default:h((()=>[(g(!0),c(v,null,f(b(j),((e,a)=>(g(),k(i,{key:a,label:e.name,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),x(o,{class:"newpower-btn",onClick:l[3]||(l[3]=e=>(e=>{if(!e)return;if(null===ie.param)return void s.msgError("请选择工作模式");let l={cmd:5,param:Number(ie.param)};a(l).then((e=>{e?s.msgSuccess("操作成功"):s.msgError("操作失败")})).catch((e=>{s.msgError("操作失败")}))})(ne.value))},{default:h((()=>[y("设定")])),_:1})])])),_:1})])),_:1},8,["model"]),m("div",Z,[m("div",null,[x(o,{size:"default",onClick:l[4]||(l[4]=e=>de(1))},{default:h((()=>[y("监控")])),_:1}),x(o,{size:"default",onClick:l[5]||(l[5]=e=>de(2))},{default:h((()=>[y("停机")])),_:1}),x(o,{size:"default",onClick:l[6]||(l[6]=e=>de(3))},{default:h((()=>[y("运行")])),_:1})])])])])),_:1})])])),_:1}),x(B,{xs:24,sm:12},{default:h((()=>[m("div",q,[x(L,{data:H.value,stripe:"",border:"",align:"center",style:{width:"100%"}},{default:h((()=>[x(K,{type:"index",width:"60",align:"center",label:"序号"}),x(K,{prop:"name",label:"数据名称",align:"center"}),x(K,{prop:"value",label:"数值",align:"center"}),x(K,{prop:"unit",label:"单位",align:"center",width:"60"})])),_:1},8,["data"])])])),_:1})])),_:1})])])}}}),[["__scopeId","data-v-afd1912b"]]);export{H as default};
