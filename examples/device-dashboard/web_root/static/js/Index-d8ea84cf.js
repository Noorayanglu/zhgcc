import{_ as a,c as e}from"./dashboard-08ba5aa5.js";import{k as l,l as s}from"./user-cd44835e.js";import{j as t}from"./index-5514c72b.js";import{g as r}from"./utils-e10d97cb.js";import{f as o}from"./feedback-5363c0cc.js";import{d as u,i as n,Y as i,e as m,Z as d,ag as c,c as p,a as v,F as f,a7 as b,u as x,U as j,O as h,az as _,aA as g,o as w,I as y,J as k,T as C,S,R as E,M as z}from"./@vue-c5a747fc.js";import{_ as B}from"./index-e79836be.js";import"./lodash-20cd73ca.js";import"./dayjs-9ee440cb.js";import"./axios-5b55c11d.js";import"./element-plus-230cec57.js";import"./lodash-es-fb3d0246.js";import"./@vueuse-90035fc5.js";import"./@element-plus-388117bf.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./escape-html-92a447fa.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-9ca8b935.js";import"./vue-router-641e505b.js";import"./pinia-801b3705.js";/* empty css                    */const A=[{name:"从机",value:0},{name:"功率曲线",value:1}],V=a=>(_("data-v-fda82a29"),a=a(),g(),a),I={class:"control"},M={class:"control-box"},O={class:"ctndata-box-box"},P=V((()=>v("div",{class:"ctndata-img"},[v("img",{src:a,alt:""})],-1))),R={class:"ctndata-box"},U={class:"ctn-name"},F={class:"ctn-value-box"},N={key:0,class:"line-level"},D={class:"btn-box"},G={class:"card-box"},H=V((()=>v("div",{class:"card-header"},[v("span",null,"控制")],-1))),J={class:"newpower-box"},T=V((()=>v("div",{class:"newpower-text"},"正值：充电；负值：放电",-1))),W={class:"newpower-box"},Y={class:"btn-box-new"},Z={class:"tab-box"},q=B(u({__name:"Index",setup(a){n((()=>{ma()})),i((()=>{na()}));const u=A,_=e,g=m({}),B=m([]),V=m([]),q=m({}),K=m([]),L=m({}),Q=m([]),X=m({}),$=m([]),aa=m({}),ea=m([]),la=m(null),sa=m(2e3),ta=m(),ra=d({param:null}),oa=m(),ua=d({param:null}),na=()=>{clearInterval(la.value),la.value=null},ia=a=>{s({cmd:a,param:0}).then((a=>{a?o.msgSuccess("操作成功"):o.msgError("操作失败")})).catch((a=>{o.msgError("操作失败")}))},ma=()=>{l().then((a=>{g.value=a,B.value=ca(g.value),V.value=da(g.value),na(),la.value=setInterval((()=>{ma()}),sa.value)})).catch((a=>{}))},da=a=>{let e={"关口表通信状态":a["关口表通信状态"],"变压器表通信状态":a["变压器表通信状态"],"光伏表通信状态":a["光伏表通信状态"],"储能表通信状态":a["储能表通信状态"],"数据记录状态":a["数据记录状态"],"参数配置状态":a["参数配置状态"],"软件版本":a["软件版本"],"可充放状态":a["可充放状态"]};return t(e)},ca=a=>{aa.value={"储能状态":a["储能状态"],"工作模式":a["储能工作模式"],"故障信息":a["故障信息"],"储能功率":a["储能功率"],"关口功率":a["关口功率"],"光伏功率":a["光伏功率"],"负载功率":a["负载功率"],"变压器功率":a["变压器功率"]},L.value={"PCS状态":a["PCS状态"],"有功功率":a["PCS功率"],"AB线电压":a["AB电压"],"BC线电压":a["BC电压"],"CA线电压":a["CA电压"]},q.value={SOC:a["BMS SOC"],"总电压":a["BMS总电压"],"总电流":a["BMS总电流"],"最高电芯电压":a["最高电芯电压"],"平均电芯电压":a["平均电芯电压"],"最低电芯电压":a["最低电芯电压"],"最高电芯温度":a["最高电芯温度"],"平均电芯温度":a["平均电芯温度"],"最低电芯温度":a["最低电芯温度"]},X.value={"空调模式":a["空调模式"],"出水温度":a["出水温度"],"回水温度":a["回水温度"],"出水压力":a["出水压力"],"回水压力":a["回水压力"]},ea.value=t(aa.value),ea.value.map((a=>(a.value=r(a.value),a))),Q.value=t(L.value),Q.value.map((a=>(a.value=r(a.value),a))),K.value=t(q.value),K.value.map((a=>(a.value=r(a.value),a))),$.value=t(X.value),$.value.map((a=>(a.value=r(a.value),a)));let e=[];return e.push($.value,Q.value,K.value,ea.value),e};return(a,e)=>{const l=c("el-input"),t=c("el-button"),r=c("el-form-item"),n=c("el-form"),i=c("el-option"),m=c("el-select"),d=c("el-card"),g=c("el-col"),A=c("el-table-column"),q=c("el-table"),K=c("el-row");return w(),p("div",I,[v("div",M,[v("div",O,[P,v("div",R,[(w(!0),p(f,null,b(B.value,((a,e)=>(w(),p("div",{key:e,class:y(["ctn-box",["ctn-box","ctn-box"+(e+1)]]),style:k("top: ".concat(x(_)[e].coordinate[0],"%; left: ").concat(x(_)[e].coordinate[1],"%;"))},[v("div",U,C(x(_)[e].name),1),v("div",F,[(w(!0),p(f,null,b(a,((a,e)=>(w(),p("div",{key:e+"A",class:"ctn-value"},[S(C(a.name)+"： ",1),v("span",null,C(a.value),1),S(" "+C(a.unit),1)])))),128))])],6)))),128)),(w(!0),p(f,null,b(x(_),((a,e)=>(w(),p("div",{key:e,class:y(["line-box","line-direction"+a.direction]),style:k("top: ".concat(a.coordinateline[0],"%; left: ").concat(a.coordinateline[1],"%;"))},[a.lineShow?(w(),p("div",N)):E("",!0)],6)))),128))])])]),v("div",D,[j(K,null,{default:h((()=>[j(g,{xs:24,sm:12,class:"col-box"},{default:h((()=>[v("div",G,[j(d,{class:"box-card"},{header:h((()=>[H])),default:h((()=>[v("div",null,[j(n,{ref_key:"formRef",ref:ta,model:ra,size:"default"},{default:h((()=>[j(r,{label:"功率设定",prop:"param"},{default:h((()=>[v("div",J,[j(l,{modelValue:ra.param,"onUpdate:modelValue":e[0]||(e[0]=a=>ra.param=a),type:"number",class:"newpower-input",style:{"max-width":"190px"}},{append:h((()=>[S("kW")])),_:1},8,["modelValue"]),j(t,{class:"newpower-btn",onClick:e[1]||(e[1]=a=>(a=>{if(!a)return;if(null===ra.param)return void o.msgError("请输入功率");let e={cmd:4,param:Number(ra.param)};s(e).then((a=>{a?o.msgSuccess("操作成功"):o.msgError("操作失败")})).catch((a=>{o.msgError("操作失败")}))})(ta.value))},{default:h((()=>[S("设定")])),_:1})]),T])),_:1})])),_:1},8,["model"]),j(n,{ref_key:"formRef1",ref:oa,model:ua,size:"default"},{default:h((()=>[j(r,{label:"工作模式",prop:"param"},{default:h((()=>[v("div",W,[j(m,{modelValue:ua.param,"onUpdate:modelValue":e[2]||(e[2]=a=>ua.param=a),placeholder:"工作模式",style:{"max-width":"190px"}},{default:h((()=>[(w(!0),p(f,null,b(x(u),((a,e)=>(w(),z(i,{key:e,label:a.name,value:a.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),j(t,{class:"newpower-btn",onClick:e[3]||(e[3]=a=>(a=>{if(!a)return;if(null===ua.param)return void o.msgError("请选择工作模式");let e={cmd:5,param:Number(ua.param)};s(e).then((a=>{a?o.msgSuccess("操作成功"):o.msgError("操作失败")})).catch((a=>{o.msgError("操作失败")}))})(oa.value))},{default:h((()=>[S("设定")])),_:1})])])),_:1})])),_:1},8,["model"]),v("div",Y,[v("div",null,[j(t,{size:"default",onClick:e[4]||(e[4]=a=>ia(1))},{default:h((()=>[S("监控")])),_:1}),j(t,{size:"default",onClick:e[5]||(e[5]=a=>ia(2))},{default:h((()=>[S("停机")])),_:1}),j(t,{size:"default",onClick:e[6]||(e[6]=a=>ia(3))},{default:h((()=>[S("运行")])),_:1})])])])])),_:1})])])),_:1}),j(g,{xs:24,sm:12},{default:h((()=>[v("div",Z,[j(q,{data:V.value,stripe:"",border:"",align:"center",style:{width:"100%"}},{default:h((()=>[j(A,{type:"index",width:"60",align:"center",label:"序号"}),j(A,{prop:"name",label:"数据名称",align:"center"}),j(A,{prop:"value",label:"数值",align:"center"}),j(A,{prop:"unit",label:"单位",align:"center",width:"60"})])),_:1},8,["data"])])])),_:1})])),_:1})])])}}}),[["__scopeId","data-v-fda82a29"]]);export{q as default};
