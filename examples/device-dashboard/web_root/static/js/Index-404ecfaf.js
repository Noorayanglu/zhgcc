import{k as e}from"./user-81589456.js";import{j as a}from"./index-37da3e0c.js";import{g as l}from"./utils-e10d97cb.js";import{f as t}from"./feedback-5363c0cc.js";import{d as o,i as s,Y as r,e as n,Z as i,ag as u,c,a as d,F as m,a7 as p,u as v,U as f,O as b,az as x,aA as j,o as S,I as h,J as w,T as g,S as _,R as C,M as y}from"./@vue-c5a747fc.js";import{_ as k}from"./index-c0b36e2f.js";import"./lodash-20cd73ca.js";import"./dayjs-9ee440cb.js";import"./axios-5b55c11d.js";import"./element-plus-230cec57.js";import"./lodash-es-fb3d0246.js";import"./@vueuse-90035fc5.js";import"./@element-plus-388117bf.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./escape-html-92a447fa.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-9ca8b935.js";import"./vue-router-641e505b.js";import"./pinia-801b3705.js";/* empty css                    */const B=[{name:"AC液冷空调",coordinate:[20,5],coordinateline:[33,21.5],direction:1,lineShow:!0},{name:"PCS变流器",coordinate:[52,5],coordinateline:[65,21.5],direction:2,lineShow:!0},{name:"BMS电池管理系统",coordinate:[54,71.3],coordinateline:[75,52],direction:3,lineShow:!0},{name:"EMS能源管理系统",coordinate:[5,71.3],coordinateline:[19,52],direction:4,lineShow:!0}],E=[{name:"从机",value:0},{name:"功率曲线",value:1}],A=e=>(x("data-v-321acc7a"),e=e(),j(),e),M={class:"control"},z={class:"control-box"},P={class:"ctndata-box-box"},V=A((()=>d("div",{class:"ctndata-img"},[d("img",{src:"/static/png/ctn-e9ddfcd4.png",alt:""})],-1))),I={class:"ctndata-box"},O={class:"ctn-name"},R={class:"ctn-value-box"},U={key:0,class:"line-level"},F={class:"btn-box"},N={class:"card-box"},D=A((()=>d("div",{class:"card-header"},[d("span",null,"控制")],-1))),G={class:"newpower-box"},J=A((()=>d("div",{class:"newpower-text"},"正值：充电；负值：放电",-1))),T={class:"newpower-box"},W={class:"btn-box-new"},Y={class:"tab-box"},Z=k(o({__name:"Index",setup(o){s((()=>{ie()})),r((()=>{re()}));const x=E,j=B,k=n({}),A=n([]),Z=n([]),q=n({}),H=n([]),K=n({}),L=n([]),Q=n({}),X=n([]),$=n({}),ee=n([]),ae=n(null);n(2e3);const le=n(),te=i({param:null}),oe=n(),se=i({param:null}),re=()=>{clearInterval(ae.value),ae.value=null},ne=a=>{e({cmd:a,param:0}).then((e=>{e?t.msgSuccess("操作成功"):t.msgError("操作失败")})).catch((e=>{t.msgError("操作失败")}))},ie=()=>{k.value={"储能状态":"监控","储能工作模式":"从机","故障信息":"无","储能功率":0,"关口功率":460,"光伏功率":-12,"负载功率":424,"变压器功率":412,"PCS状态":"运行","PCS功率":0,"AB电压":387,"BC电压":389,"CA电压":386,"BMS SOC":96,"BMS总电压":864.2,"BMS总电流":0,"最高电芯电压":3.329,"平均电芯电压":3.324,"最低电芯电压":3.32,"最高电芯温度":16,"平均电芯温度":13,"最低电芯温度":13,"空调模式":"停止","出水温度":20.9,"回水温度":20.3,"出水压力":1.4,"回水压力":.8,"关口表通信状态":"正常","变压器表通信状态":"正常","光伏表通信状态":"正常","储能表通信状态":"正常","数据记录状态":"正常","参数配置状态":"正常","软件版本":"10.1.6","可充放状态":"可充可放"},A.value=ce(k.value),Z.value=ue(k.value)},ue=e=>{let l={"关口表通信状态":e["关口表通信状态"],"变压器表通信状态":e["变压器表通信状态"],"光伏表通信状态":e["光伏表通信状态"],"储能表通信状态":e["储能表通信状态"],"数据记录状态":e["数据记录状态"],"参数配置状态":e["参数配置状态"],"软件版本":e["软件版本"],"可充放状态":e["可充放状态"]};return a(l)},ce=e=>{$.value={"储能状态":e["储能状态"],"工作模式":e["储能工作模式"],"故障信息":e["故障信息"],"储能功率":e["储能功率"],"关口功率":e["关口功率"],"光伏功率":e["光伏功率"],"负载功率":e["负载功率"],"变压器功率":e["变压器功率"]},K.value={"PCS状态":e["PCS状态"],"有功功率":e["PCS功率"],"AB线电压":e["AB电压"],"BC线电压":e["BC电压"],"CA线电压":e["CA电压"]},q.value={SOC:e["BMS SOC"],"总电压":e["BMS总电压"],"总电流":e["BMS总电流"],"最高电芯电压":e["最高电芯电压"],"平均电芯电压":e["平均电芯电压"],"最低电芯电压":e["最低电芯电压"],"最高电芯温度":e["最高电芯温度"],"平均电芯温度":e["平均电芯温度"],"最低电芯温度":e["最低电芯温度"]},Q.value={"空调模式":e["空调模式"],"出水温度":e["出水温度"],"回水温度":e["回水温度"],"出水压力":e["出水压力"],"回水压力":e["回水压力"]},ee.value=a($.value),ee.value.map((e=>(e.value=l(e.value),e))),L.value=a(K.value),L.value.map((e=>(e.value=l(e.value),e))),H.value=a(q.value),H.value.map((e=>(e.value=l(e.value),e))),X.value=a(Q.value),X.value.map((e=>(e.value=l(e.value),e)));let t=[];return t.push(X.value,L.value,H.value,ee.value),t};return(a,l)=>{const o=u("el-input"),s=u("el-button"),r=u("el-form-item"),n=u("el-form"),i=u("el-option"),k=u("el-select"),B=u("el-card"),E=u("el-col"),q=u("el-table-column"),H=u("el-table"),K=u("el-row");return S(),c("div",M,[d("div",z,[d("div",P,[V,d("div",I,[(S(!0),c(m,null,p(A.value,((e,a)=>(S(),c("div",{key:a,class:h(["ctn-box",["ctn-box","ctn-box"+(a+1)]]),style:w("top: ".concat(v(j)[a].coordinate[0],"%; left: ").concat(v(j)[a].coordinate[1],"%;"))},[d("div",O,g(v(j)[a].name),1),d("div",R,[(S(!0),c(m,null,p(e,((e,a)=>(S(),c("div",{key:a+"A",class:"ctn-value"},[_(g(e.name)+"： ",1),d("span",null,g(e.value),1),_(" "+g(e.unit),1)])))),128))])],6)))),128)),(S(!0),c(m,null,p(v(j),((e,a)=>(S(),c("div",{key:a,class:h(["line-box","line-direction"+e.direction]),style:w("top: ".concat(e.coordinateline[0],"%; left: ").concat(e.coordinateline[1],"%;"))},[e.lineShow?(S(),c("div",U)):C("",!0)],6)))),128))])])]),d("div",F,[f(K,null,{default:b((()=>[f(E,{xs:24,sm:12,class:"col-box"},{default:b((()=>[d("div",N,[f(B,{class:"box-card"},{header:b((()=>[D])),default:b((()=>[d("div",null,[f(n,{ref_key:"formRef",ref:le,model:te,size:"default"},{default:b((()=>[f(r,{label:"功率设定",prop:"param"},{default:b((()=>[d("div",G,[f(o,{modelValue:te.param,"onUpdate:modelValue":l[0]||(l[0]=e=>te.param=e),type:"number",class:"newpower-input",style:{"max-width":"190px"}},{append:b((()=>[_("kW")])),_:1},8,["modelValue"]),f(s,{class:"newpower-btn",onClick:l[1]||(l[1]=a=>(a=>{if(!a)return;if(null===te.param)return void t.msgError("请输入功率");let l={cmd:4,param:Number(te.param)};e(l).then((e=>{e?t.msgSuccess("操作成功"):t.msgError("操作失败")})).catch((e=>{t.msgError("操作失败")}))})(le.value))},{default:b((()=>[_("设定")])),_:1})]),J])),_:1})])),_:1},8,["model"]),f(n,{ref_key:"formRef1",ref:oe,model:se,size:"default"},{default:b((()=>[f(r,{label:"工作模式",prop:"param"},{default:b((()=>[d("div",T,[f(k,{modelValue:se.param,"onUpdate:modelValue":l[2]||(l[2]=e=>se.param=e),placeholder:"工作模式",style:{"max-width":"190px"}},{default:b((()=>[(S(!0),c(m,null,p(v(x),((e,a)=>(S(),y(i,{key:a,label:e.name,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),f(s,{class:"newpower-btn",onClick:l[3]||(l[3]=a=>(a=>{if(!a)return;if(null===se.param)return void t.msgError("请选择工作模式");let l={cmd:5,param:Number(se.param)};e(l).then((e=>{e?t.msgSuccess("操作成功"):t.msgError("操作失败")})).catch((e=>{t.msgError("操作失败")}))})(oe.value))},{default:b((()=>[_("设定")])),_:1})])])),_:1})])),_:1},8,["model"]),d("div",W,[d("div",null,[f(s,{size:"default",onClick:l[4]||(l[4]=e=>ne(1))},{default:b((()=>[_("监控")])),_:1}),f(s,{size:"default",onClick:l[5]||(l[5]=e=>ne(2))},{default:b((()=>[_("停机")])),_:1}),f(s,{size:"default",onClick:l[6]||(l[6]=e=>ne(3))},{default:b((()=>[_("运行")])),_:1})])])])])),_:1})])])),_:1}),f(E,{xs:24,sm:12},{default:b((()=>[d("div",Y,[f(H,{data:Z.value,stripe:"",border:"",align:"center",style:{width:"100%"}},{default:b((()=>[f(q,{type:"index",width:"60",align:"center",label:"序号"}),f(q,{prop:"name",label:"数据名称",align:"center"}),f(q,{prop:"value",label:"数值",align:"center"}),f(q,{prop:"unit",label:"单位",align:"center",width:"60"})])),_:1},8,["data"])])])),_:1})])),_:1})])])}}}),[["__scopeId","data-v-321acc7a"]]);export{Z as default};
