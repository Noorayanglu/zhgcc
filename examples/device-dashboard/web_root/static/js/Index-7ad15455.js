import{e,f as a}from"./user-5587e42e.js";import{j as l}from"./index-110bbcb5.js";import{f as s}from"./feedback-5363c0cc.js";import{d as t,e as r,Z as n,i as o,Y as u,ag as i,c as m,U as c,O as d,o as p,a as v,F as f,a7 as b,S as g,M as x,u as j,az as _,aA as h}from"./@vue-c5a747fc.js";import{_ as k}from"./index-6dbce3d0.js";import"./index-be79eb97.js";import"./lodash-20cd73ca.js";import"./dayjs-9ee440cb.js";import"./axios-5b55c11d.js";import"./element-plus-230cec57.js";import"./lodash-es-fb3d0246.js";import"./@vueuse-90035fc5.js";import"./@element-plus-388117bf.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./escape-html-92a447fa.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-9ca8b935.js";import"./vue-router-641e505b.js";import"./pinia-801b3705.js";/* empty css                    */const w=[{name:"1#电池包",value:1},{name:"2#电池包",value:2},{name:"3#电池包",value:3},{name:"4#电池包",value:4},{name:"5#电池包",value:5}],y=e=>(_("data-v-09fa44af"),e=e(),h(),e),C={class:"fighting"},E=y((()=>v("div",{class:"img-box"},[v("img",{src:"/static/png/fe1-0b110748.png",alt:""})],-1))),z={class:"ctnbox-box"},I={class:"btn-box"},A={class:"card-box"},S=y((()=>v("div",{class:"card-header"},[v("span",null,"控制")],-1))),V={class:"btn-box-new first-line-btn"},F={class:"newpower-box"},M={class:"btn-box-new"},O=y((()=>v("div",{class:"img-box"},[v("img",{src:"/static/png/fe-4489648d.png",alt:""})],-1))),U={class:"ctnbox-box"},D={class:"ctn-box"},G=k(t({__name:"Index",setup(t){const _=w;r([]);const h=r({}),k=r([]);r([]);const y=r([]),G=r([]);r([]);const K=r(null),N=r(2e3),P=r(),R=n({param:null});o((()=>{q()})),u((()=>{Y()}));const Y=()=>{clearInterval(K.value),K.value=null},Z=(e,l)=>{a({cmd:e,param:l}).then((e=>{e?s.msgSuccess("操作成功"):s.msgError("操作失败")})).catch((e=>{s.msgError("操作失败")}))},q=()=>{e().then((e=>{h.value=e,k.value=[],y.value=[],l(h.value).map(((e,a)=>{e.name.indexOf("PACK")>-1?k.value.push(e):y.value.push(e)})),k.value.map(((e,a)=>(e.value=l(e.value),e.value.map((a=>(a[e.name]=a.value,a))),e))),k.value.reduce(((e,a,l)=>{let s=((e,a,l)=>{const s=new Map;for(const t of e.concat(a))if(s.has(t[l])){const e=s.get(t[l]);for(const a in t)a!==l&&(e[a]=t[a])}else s.set(t[l],t);return Array.from(s.values())})(e.value,a.value,"name");return l===k.value.length-1&&(G.value=s),{value:s}})),y.value.map(((e,a)=>(e.value=l(e.value),e))),Y(),K.value=setInterval((()=>{q()}),N.value)})).catch((e=>{}))};return(e,l)=>{const t=i("el-col"),r=i("el-table-column"),n=i("el-table"),o=i("el-button"),u=i("el-option"),h=i("el-select"),w=i("el-form-item"),K=i("el-form"),N=i("el-card"),Y=i("el-row");return p(),m("div",C,[c(Y,null,{default:d((()=>[c(t,{xs:24,sm:5},{default:d((()=>[E])),_:1}),c(t,{xs:24,sm:7},{default:d((()=>[v("div",z,[(p(!0),m(f,null,b(y.value,((e,a)=>(p(),m("div",{key:a,class:"ctn-box"},[c(n,{data:e.value,stripe:"",border:"",align:"center"},{default:d((()=>[c(r,{label:"全氟己酮自动灭火系统",align:"center"},{default:d((()=>[c(r,{prop:"name",label:"数据名称",align:"center"}),c(r,{prop:"value",label:e.name,align:"center","min-width":"110"},null,8,["label"])])),_:2},1024)])),_:2},1032,["data"])])))),128))])])),_:1}),c(t,{xs:24,sm:12},{default:d((()=>[v("div",I,[v("div",A,[c(N,{class:"box-card"},{header:d((()=>[S])),default:d((()=>[v("div",null,[c(K,{ref_key:"formRef",ref:P,model:R,size:"default"},{default:d((()=>[v("div",V,[v("div",null,[c(o,{onClick:l[0]||(l[0]=e=>Z(4,1))},{default:d((()=>[g("锁定")])),_:1}),c(o,{onClick:l[1]||(l[1]=e=>Z(4,0))},{default:d((()=>[g("解锁")])),_:1})])]),c(w,{label:"电池包喷发",prop:"param"},{default:d((()=>[v("div",F,[c(h,{modelValue:R.param,"onUpdate:modelValue":l[2]||(l[2]=e=>R.param=e),placeholder:"电池包喷发",style:{"max-width":"190px"}},{default:d((()=>[(p(!0),m(f,null,b(j(_),((e,a)=>(p(),x(u,{key:a,label:e.name,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),c(o,{class:"newpower-btn",onClick:l[3]||(l[3]=e=>(e=>{if(!e)return;if(null===R.param)return void s.msgError("请选择电池包");let l={cmd:0,param:Number(R.param)};a(l).then((e=>{e?s.msgSuccess("操作成功"):s.msgError("操作失败")})).catch((e=>{s.msgError("操作失败")}))})(P.value))},{default:d((()=>[g("电池包喷发")])),_:1})])])),_:1}),v("div",M,[v("div",null,[c(o,{onClick:l[4]||(l[4]=e=>Z(1,0))},{default:d((()=>[g("电池仓喷发")])),_:1}),c(o,{onClick:l[5]||(l[5]=e=>Z(2,1))},{default:d((()=>[g("喷发确认")])),_:1}),c(o,{onClick:l[6]||(l[6]=e=>Z(2,0))},{default:d((()=>[g("取消喷发确认")])),_:1}),c(o,{onClick:l[7]||(l[7]=e=>Z(3,0))},{default:d((()=>[g("重置报警")])),_:1})])])])),_:1},8,["model"])])])),_:1})])])])),_:1}),c(t,{xs:24,sm:5},{default:d((()=>[O])),_:1}),c(t,{xs:24,sm:19},{default:d((()=>[v("div",U,[v("div",D,[c(n,{data:G.value,stripe:"",border:"",align:"center"},{default:d((()=>[c(r,{prop:"",label:"电池包火灾探测器",align:"center"},{default:d((()=>[c(r,{prop:"name",label:"数据名称",align:"center"}),(p(!0),m(f,null,b(k.value,((e,a)=>(p(),x(r,{key:a,prop:e.name,label:e.name,align:"center"},null,8,["prop","label"])))),128)),c(r,{prop:"unit",label:"单位",align:"center"})])),_:1})])),_:1},8,["data"])])])])),_:1})])),_:1})])}}}),[["__scopeId","data-v-09fa44af"]]);export{G as default};
